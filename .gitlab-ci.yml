image: maven:latest

stages:
  - build
  - test
  - sonarqube-check
  - deploy

before_script:
  - echo "Configuring Maven..."
  - mkdir -p ~/.m2
  - echo "<settings><mirrors><mirror><id>central</id><mirrorOf>*</mirrorOf><url>https://repo.maven.apache.org/maven2</url></mirror></mirrors></settings>" > ~/.m2/settings.xml
  - mvn --version
  - echo "Maven configuration completed."

build:
  stage: build
  script:
    - mvn clean package -DskipTests
